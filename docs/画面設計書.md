# 画面設計書

- [画面設計書](#画面設計書)
  - [画面概要説明](#画面概要説明)
  - [画面レイアウト](#画面レイアウト)
  - [画面項目定義](#画面項目定義)
  - [画面項目属性定義](#画面項目属性定義)
  - [画面項目入力チェック・バリデーション定義](#画面項目入力チェックバリデーション定義)
  - [画面イベント一覧](#画面イベント一覧)
  - [画面編集仕様 (◯◯ イベント時)](#画面編集仕様--イベント時)
  - [画面更新仕様 (◯◯ イベント時)](#画面更新仕様--イベント時)
  - [エラーメッセージ一覧](#エラーメッセージ一覧)
  - [補足説明](#補足説明)

## 画面概要説明

## 画面レイアウト

![alt text](../img/mock_with_comments.png)

## 画面項目定義

| No. | 項目名                    | 項目種別 | 項目ラベル ID       | タブ順 | I/O | データ型 | 表示タイミング     | 横位置 | 縦位置 | 備考                                             |
| --- | ------------------------- | -------- | ------------------- | ------ | --- | -------- | ------------------ | ------ | ------ | ------------------------------------------------ |
| 1   | PF 設定 (入力欄ラベル)    | text     | pf_config_label     | 1      | O   | String   | 初期               | 1      | 1      | PF: Portfolio                                    |
| 2   | ティッカー (入力欄ラベル) | text     | ticker_label        | 2      | O   | String   | 初期               | 1      | 2      |                                                  |
| 3   | PF 番号 (入力欄ラベル)    | text     | pf_number           | 3      | O   | String   | 初期               | 1      | 3      | PF は 3 つまで．                                 |
| 4   | ティッカープルダウン      | pulldown | ticker_pulldown     | 4      | I   | -        | 初期               | 2      | 1      | ・検索付きプルダウン                             |
| 5   | ウェイト入力欄            | form     | weight_input        | 5      | I   | Float    | 初期               | 2      | 2      | ・0 ≦ w ≦ 100<br>・最大文字数例 99.99            |
| 6   | 合計ウェイト (ラベル)     | text     | total_weight_label  | 6      | O   | String   | 初期               | 2      | 3      |                                                  |
| 7   | 合計ウェイト (出力)       | text     | total_weight_output | 7      | O   | Float    | ウェイト入力と同時 | 2      | 4      | 100 以外不可                                     |
| 8   | PF 分析ボタン             | button   | pf_analysis_button  | 8      | I   | -        | 初期               | 3      | 1      |                                                  |
| 9   | PF 分析結果               | text     | pf_analysis_result  | 9      | O   | String   | PF 分析後          | 3      | 2      |                                                  |
| 10  | 分析期間                  | text     | analysis_period     | 10     | O   | String   | PF 分析後          | 3      | 3      | 選択された銘柄の内、上場期間が短い物に合わせる。 |
| 11  | PF 番号 (ラベル)          | text     | pf_number_label     | 11     | O   | String   | PF 分析後          | 3      | 4      | 3 つまで                                         |
| 12  | リターン (ラベル)         | text     | return_label        | 12     | O   | String   | PF 分析後          | 4      | 1      | CAGR                                             |
| 13  | リターン (出力)           | text     | return_output       | 13     | O   | Float    | PF 分析後          | 4      | 2      | ・% 表示<br>・少数第 2 位まで                    |
| 14  | リスク (ラベル)           | text     | risk_label          | 14     | O   | String   | PF 分析後          | 4      | 3      | 標準偏差を年率換算                               |
| 15  | リスク (出力)             | text     | risk_output         | 15     | O   | Float    | PF 分析後          | 4      | 4      | ・% 表示<br>・少数第 2 位まで                    |
| 16  | SR (ラベル)               | text     | sr_label            | 16     | O   | String   | PF 分析後          | 5      | 1      | ・SR: Sharp Ratio<br>・リスクフリーレートは 0    |
| 17  | SR (出力)                 | text     | sr_output           | 17     | O   | Float    | PF 分析後          | 5      | 2      | ・% にしない<br>・少数第 2 位まで                |

注: PF: ポートフォリオ，SR: シャープレシオ

## 画面項目属性定義

| No. | 項目名               | 項目種別 | 文字種     | Format     | 必須 | 最小文字数 | 最大文字数 | 最小 Byte 数 | 最大 Byte 数 | 範囲最小値 | 範囲最大値 |
| --- | -------------------- | -------- | ---------- | ---------- | ---- | ---------- | ---------- | ------------ | ------------ | ---------- | ---------- |
|     | ティッカープルダウン | pulldown | 半角英数字 | 任意文字列 | 必須 | 1          | 6          | 1            | 6            | -          | -          |
|     | ウェイト入力欄       | form     | 半角数字   | 任意文字列 | 必須 | 1          | 5          | 1            | 5            | 0          | 100        |

## 画面項目入力チェック・バリデーション定義

| No. | チェック/バリデーション名 | 対象項目名   | 項目種別 | Client/Server | チェックタイミング      | エラー及びワーニング判定条件                | メッセージ ID           |
| --- | ------------------------- | ------------ | -------- | ------------- | ----------------------- | ------------------------------------------- | ----------------------- |
| 1   | ウェイト入力欄 チェック   | PF           | form     | Client        | ウェイト入力完了時      | 0 ≦ w ≦ 100                                 | MSG_INVALID_WEIGHTS     |
| 2   | 合計ウェイト チェック     | 合計ウェイト | text     | Client        | ウェイト入力完了時      | w = 100                                     | MSG_INVALID_SUM_WEIGHTS |
| 3   | ティッカー入力チェック    | ティッカー   | form     | Client        | PF 分析ボタンクリック時 | ティッカーが少なくとも 1 つ入力されているか | MSG_EMPTY_TICKERS       |
| 4   | ウェイト入力チェック      | PF           | form     | Client        | PF 分析ボタンクリック時 | ティッカーかつウェイトが TRUE か            | MSG_EMPTY_WEIGHTS       |

## 画面イベント一覧

| No. | アクション名  | イベント名 | 対象項目名 | 項目種別 | イベントタイミング | イベント処理内容                                                |
| --- | ------------- | ---------- | ---------- | -------- | ------------------ | --------------------------------------------------------------- |
| 2   | ウェイト入力  | onChange   |            | text     | ウェイト入力変更時 | ・入力内容のバリデーションを実施<br>・エラー時 MSG 表示         |
| 3   | ウェイト入力  | onBlur     |            | text     | ウェイト入力終了時 | ・合計ウェイトの計算<br>・バリデーション<br>・エラー時 MSG 表示 |
| 4   | PF 分析ボタン | onClick    |            | button   | ボタンクリック時   | ・入力内容のバリデーションを実施<br>・エラー時は MSG 表示       |

## 画面編集仕様 (◯◯ イベント時)

| No. | 項目名 | 項目種別 | 取得元テーブル名／設定ファイル | 取得元テーブル項目名／固定値 | 編集仕様 |
| --- | ------ | -------- | ------------------------------ | ---------------------------- | -------- |
|     |        |          |                                |                              |          |

## 画面更新仕様 (◯◯ イベント時)

| No. | 項目名 | 項目種別 | 保存先テーブル名 | 保存先テーブル項目名 | 更新仕様 |
| --- | ------ | -------- | ---------------- | -------------------- | -------- |
|     |        |          |                  |                      |          |

## エラーメッセージ一覧

| メッセージ ID          | エラーメッセージ一覧                         |
| ---------------------- | -------------------------------------------- |
| MSG_INVALID_TICKERS    | ティッカーを正しく入力してください。         |
| MSG_INVALID_WEIGHT     | 各ウェイトは 0 以上 100 以下にしてください。 |
| MSG_INVALID_SUM_WEIGHT | ウェイトの合計は 100 にしてください。        |
| MSG_TICKERS_NOT_FOUND  | 銘柄が見つかりませんでした。                 |

## 補足説明
